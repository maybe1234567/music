var root=window.player,dataList="",len="",nowIndex=0,Audio=root.AudioManger,width=$(".pro-wrap")[0].clientWidth,timer="",str="";function getData(t){$.ajax({type:"GET",url:t,success:function(t){len=(dataList=t).length,root.render(t[0]),Audio.getAudio(dataList[0].audio),musicList(t),bindEvent()}})}function bindEvent(){$(".prev").on("click",function(){0==nowIndex?nowIndex=len-1:nowIndex--,playing(nowIndex)}),$(".next").on("click",function(){nowIndex==len-1?nowIndex=0:nowIndex++,playing(nowIndex)}),$(".play").on("click",function(t){"pause"==Audio.status?(Audio.play(),rotated($(".img-box").attr("data-deg"))):(Audio.pause(),clearInterval(timer));$(this).toggleClass("playing")}),$(".like").on("click",function(){$(this).toggleClass("liking")}),$(".list").on("click",function(t){t.stopPropagation(),$(this).next().animate({bottom:0},200,"linear")}),$(".music-list li").on("click",function(t){$(".music-list").animate({bottom:-300},200,"linear"),playing($(this).attr("data-id"))}),$(".wrapper").on("click",function(t){$(".music-list").animate({bottom:-300},200,"linear")}),$(".pro-wrap").on("click",function(t){var n=t.offsetX;duration=Audio.audio.duration;var i=n/width*duration;Audio.audio.currentTime=i,$(this).find(".progress-bar").css({width:n})})}function playing(t){root.render(dataList[t]),Audio.getAudio(dataList[t].audio),Audio.play(),$(".play").addClass("playing"),$(".img-box").css({transform:"rotateZ(0deg)",transition:"none"}),rotated(0)}function rotated(t){t=+t,clearInterval(timer),timer=setInterval(function(){t+=2,$(".img-box").css({transform:"rotateZ("+t+"deg)",transition:"all 1s ease-out "}).attr("data-deg",t)},80)}function musicList(t){t.forEach(function(t,n){str+="<li  data-id = "+n+">             <span>"+t.song+'</span>             <span class = "singer">-'+t.singer+"</span>         </li>"}),$(".music-list").html(str)}getData("../mock/data.json");